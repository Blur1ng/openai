# –°–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –±–∞—Ç—á–∞ AI –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ `.md` —Ñ–∞–π–ª—ã.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install requests
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
python download_results.py --server http://185.130.224.177:8001 --token YOUR_TOKEN
```

### –° —É–∫–∞–∑–∞–Ω–∏–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

```bash
python download_results.py \
    --server http://185.130.224.177:8001 \
    --token YOUR_TOKEN \
    --output-dir my_results
```

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|----------|--------------|----------|--------|
| `--server` | ‚úÖ –î–∞ | URL —Å–µ—Ä–≤–µ—Ä–∞ | `http://185.130.224.177:8001` |
| `--token` | ‚úÖ –î–∞ | –¢–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ | `your_secret_token` |
| `--output-dir` | ‚ùå –ù–µ—Ç | –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `results/`) | `my_results` |

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–º–ø—Ç–æ–≤**: –°–∫—Ä–∏–ø—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ –∏–∑ –ë–î, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ–∂–∏–¥–∞—Ç—å –≤ –æ–¥–Ω–æ–º –±–∞—Ç—á–µ.

2. **–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤**: –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç `N` –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–≥–¥–µ `N` = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤).

3. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ batch_id**: –ù–∞—Ö–æ–¥–∏—Ç `batch_id` —Å–∞–º–æ–≥–æ —Å–≤–µ–∂–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ —ç—Ç–æ–º—É –±–∞—Ç—á—É.

4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª—ã**: –ö–∞–∂–¥—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª —Å –∏–º–µ–Ω–µ–º, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –Ω–∞–∑–≤–∞–Ω–∏—é –ø—Ä–æ–º–ø—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `architecture.md`, `code_review.md`).

## –ü—Ä–∏–º–µ—Ä—ã

### –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –ø–∞–ø–∫—É `results/`

```bash
python download_results.py \
    --server http://185.130.224.177:8001 \
    --token my_secret_token
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:
```
üöÄ –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤...
üìä –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤: 4
üîç –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 4 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤...
‚úÖ –ü–æ–ª—É—á–µ–Ω–æ 4 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
üéØ Batch ID –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –±–∞—Ç—á–∞: 123e4567-e89b-12d3-a456-426614174000
üìÅ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤: /Users/evgene/Documents/devops/openai/results
‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: architecture.md
‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: code_review.md
‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: dataflow.md
‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: tech_doc.md

üéâ –ì–æ—Ç–æ–≤–æ! –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: 4
```

### –ó–∞–≥—Ä—É–∑–∫–∞ –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é

```bash
python download_results.py \
    --server http://185.130.224.177:8001 \
    --token my_secret_token \
    --output-dir docs/ai_analysis
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏:

- ‚ùå **–ù–µ—Ç —Å–≤—è–∑–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º**: –í—ã–≤–æ–¥–∏—Ç –æ—à–∏–±–∫—É –∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É
- ‚ö†Ô∏è **–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤**: –ò–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚è≠Ô∏è **–ù–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏**: –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º –Ω–µ `finished`
- üîç **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑ –¥—Ä—É–≥–∏—Ö –±–∞—Ç—á–µ–π**: –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –±–∞—Ç—á–∞

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤

```
results/
‚îú‚îÄ‚îÄ architecture.md          # –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–º–ø—Ç–∞ "architecture"
‚îú‚îÄ‚îÄ code_review.md          # –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–º–ø—Ç–∞ "code_review"
‚îú‚îÄ‚îÄ dataflow.md             # –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–º–ø—Ç–∞ "dataflow"
‚îî‚îÄ‚îÄ tech_doc.md             # –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–º–ø—Ç–∞ "tech_doc"
```

## API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–∫—Ä–∏–ø—Ç–æ–º

1. `GET /api/v1/prompts/?is_active=true` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤
2. `GET /api/v1/ai_model/results?limit=N` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö N —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
3. `GET /api/v1/ai_model/results/{id}` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å batch_id

–° –≤–µ—Ä—Å–∏–∏, –≤–∫–ª—é—á–∞—é—â–µ–π `batch_id`, –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –ø–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–º—É –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É –±–∞—Ç—á–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- ‚úÖ –¢–æ—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –æ–¥–Ω–æ–º—É –∑–∞–ø—Ä–æ—Å—É
- ‚úÖ –ò–∑–±–µ–∂–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ `batch_id` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ë–î
docker exec -it pg psql -U postgres -d prompt_db

# –î–æ–±–∞–≤—å—Ç–µ –∫–æ–ª–æ–Ω–∫—É batch_id
ALTER TABLE job_results ADD COLUMN batch_id TEXT;

# –°–æ–∑–¥–∞–π—Ç–µ –∏–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
CREATE INDEX idx_job_results_batch_id ON job_results(batch_id);
```

–ò–ª–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –ë–î —Å –Ω–æ–≤–æ–π —Å—Ö–µ–º–æ–π:

```bash
docker-compose down -v
docker-compose up -d
```

## Troubleshooting

### –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (401)

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞:

```bash
# –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –∏–∑ .env —Ñ–∞–π–ª–∞
cat .env | grep SECRET_ADMIN_TOKEN
```

### –ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏:

```bash
docker exec -it pg psql -U postgres -d prompt_db \
    -c "SELECT job_id, status, batch_id FROM job_results ORDER BY created_at DESC LIMIT 5;"
```

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API:

```bash
curl http://185.130.224.177:8001/docs
```

